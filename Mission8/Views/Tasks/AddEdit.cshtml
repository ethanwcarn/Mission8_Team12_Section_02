@*
    Tasks/AddEdit.cshtml – Add / Edit Task Form
    A single form that handles both creating new tasks and editing existing ones.
    When TaskId is 0, the form creates a new task; otherwise it updates the existing one.

    Form Fields:
      - Task Name (required text input)
      - Due Date (optional date picker)
      - Quadrant (required dropdown: 1–4)
      - Category (dropdown populated from database via ViewBag)
      - Completed (checkbox)
*@

@* Declare the model type: a single Task object *@
@model Mission8.Models.Task

@{
    ViewData["Title"] = "Add / Edit Task";
}

<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8">

            <h2 class="mb-4 text-center">Add / Edit Task</h2>

            @* The form posts back to TasksController.AddEdit (POST) *@
            <form method="post">

                @* Hidden field preserves the TaskId during form submission.
                   TaskId = 0 means new task; non-zero means edit existing. *@
                <input type="hidden" asp-for="TaskId" />

                @* Task Name – Required text field with validation message *@
                <div class="row mb-3">
                    <div class="col-md-12">
                        <label asp-for="TaskName" class="form-label"></label>
                        <input asp-for="TaskName" class="form-control" />
                        <span asp-validation-for="TaskName" class="text-danger"></span>
                    </div>
                </div>

                @* Due Date – Optional date picker input *@
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label asp-for="DueDate" class="form-label"></label>
                        <input asp-for="DueDate" type="date" class="form-control" />
                    </div>
                </div>

                @* Quadrant – Required dropdown with the four Covey quadrant options *@
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label asp-for="Quadrant" class="form-label"></label>
                        <select asp-for="Quadrant" class="form-select">
                            <option value="">Select Quadrant</option>
                            <option value="1">Quadrant I (Important / Urgent)</option>
                            <option value="2">Quadrant II (Important / Not Urgent)</option>
                            <option value="3">Quadrant III (Not Important / Urgent)</option>
                            <option value="4">Quadrant IV (Not Important / Not Urgent)</option>
                        </select>
                        <span asp-validation-for="Quadrant" class="text-danger"></span>
                    </div>
                </div>

                @* Category – Dropdown dynamically populated from the database.
                   ViewBag.Categories is set by TasksController.PopulateCategories(). *@
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label asp-for="CategoryId" class="form-label"></label>
                        <select asp-for="CategoryId" class="form-select">
                            <option value="">Select Category</option>
                            @foreach (var c in ViewBag.Categories)
                            {
                                <option value="@c.CategoryId">
                                    @c.CategoryName
                                </option>
                            }
                        </select>
                    </div>
                </div>

                @* Completed – Checkbox to mark the task as done *@
                <div class="row mb-4">
                    <div class="col-md-6">
                        <div class="form-check">
                            <input asp-for="Completed" class="form-check-input" />
                            <label asp-for="Completed" class="form-check-label"></label>
                        </div>
                    </div>
                </div>

                @* Form action buttons – Save submits the form, Cancel navigates back to Quadrants *@
                <div class="row">
                    <div class="col-md-12 text-center">
                        <button type="submit" class="btn btn-primary me-2">
                            Save Task
                        </button>

                        <a asp-controller="Tasks"
                           asp-action="Quadrants"
                           class="btn btn-secondary">
                            Cancel
                        </a>
                    </div>
                </div>

            </form>

        </div>
    </div>
</div>
